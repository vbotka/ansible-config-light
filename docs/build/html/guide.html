

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>User’s guide &mdash; ansible-role-config-light 1.3.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
        <link rel="copyright" title="Copyright" href="copyright.html"/>
    <link rel="top" title="ansible-role-config-light 1.3.0 documentation" href="index.html"/>
        <link rel="next" title="Annotated source code" href="annotation.html"/>
        <link rel="prev" title="Ansible role Config Light" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ansible-role-config-light
          

          
          </a>

          
            
            
              <div class="version">
                1.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">User’s guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#playbook">Playbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debug">Debug</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tags">Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variables">Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#default-variables">Default variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cl-handlers-dictionary-with-handlers">cl_handlers - dictionary with handlers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See Also</a></li>
<li class="toctree-l4"><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cl-packages-dictionary-with-packages-or-bsd-ports">cl_packages - dictionary with packages or BSD ports</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">See Also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cl-services-dictionary-with-services">cl_services - dictionary with services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">See Also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cl-files-dictionary-with-files">cl_files - dictionary with files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id12">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">See Also</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters-for-template">Parameters for template</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-of-template">Example of template</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">See Also</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters-for-lineinfile">Parameters for lineinfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-of-lineinfile">Example of lineinfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">See Also</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters-for-blockinfile">Parameters for blockinfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-of-blockinfileinfile">Example of blockinfileinfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">See Also</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters-for-ini-file">Parameters for ini_file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-of-ini-file">Example of ini_file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id19">See Also</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#best-practice">Best practice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="annotation.html">Annotated source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="legalnotice.html">Legal Notice</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ansible-role-config-light</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>User’s guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/guide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="user-s-guide">
<span id="ug"></span><h1><a class="toc-backref" href="#id20">User’s guide</a><a class="headerlink" href="#user-s-guide" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#user-s-guide" id="id20">User’s guide</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id21">Introduction</a></p></li>
<li><p><a class="reference internal" href="#installation" id="id22">Installation</a></p></li>
<li><p><a class="reference internal" href="#playbook" id="id23">Playbook</a></p></li>
<li><p><a class="reference internal" href="#debug" id="id24">Debug</a></p></li>
<li><p><a class="reference internal" href="#tags" id="id25">Tags</a></p></li>
<li><p><a class="reference internal" href="#variables" id="id26">Variables</a></p>
<ul>
<li><p><a class="reference internal" href="#default-variables" id="id27">Default variables</a></p></li>
<li><p><a class="reference internal" href="#cl-handlers-dictionary-with-handlers" id="id28">cl_handlers - dictionary with handlers</a></p></li>
<li><p><a class="reference internal" href="#cl-packages-dictionary-with-packages-or-bsd-ports" id="id29">cl_packages - dictionary with packages or BSD ports</a></p></li>
<li><p><a class="reference internal" href="#cl-services-dictionary-with-services" id="id30">cl_services - dictionary with services</a></p></li>
<li><p><a class="reference internal" href="#cl-files-dictionary-with-files" id="id31">cl_files - dictionary with files</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#best-practice" id="id32">Best practice</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<span id="ug-introduction"></span><h2><a class="toc-backref" href="#id21">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Ansible role: <a class="reference external" href="https://galaxy.ansible.com/vbotka/config_light/">config_light</a></p></li>
<li><p>Supported systems: <a class="reference external" href="https://www.freebsd.org/releases/">FreeBSD</a>, <a class="reference external" href="http://releases.ubuntu.com/">Ubuntu</a></p></li>
<li><p>Requirements: None</p></li>
</ul>
<p>The role installs packages, creates and configures files, services,
and handlers. This provides a simple, but flexible framework to apply
basic Ansible modules. Substantial part of the control-flow will be
determined by the structure of the data. Some attributes of the
dictionaries trigger Ansible modules to modify configuration files,
configure services and create handlers.</p>
<p>The role can be used with any supported OS to install and configure
arbitrary applications. The role is tested with supported releases of
FreeBSD and Ubuntu. It can be expected that other BSD and Linux
distributions, that support the Ansible modules mentioned below,
should work with minimal changes. Red Hat and Debian
<em>ansible_os_family</em> should work out of the box.</p>
<p>Used Ansible modules comprise <code class="docutils literal notranslate"><span class="pre">package</span></code> to install Linux packages,
and both <code class="docutils literal notranslate"><span class="pre">pkgng</span></code> and <code class="docutils literal notranslate"><span class="pre">portinstall</span></code> to install FreeBSD packages or
ports.</p>
<p>Ansible modules <code class="docutils literal notranslate"><span class="pre">template</span></code>, <code class="docutils literal notranslate"><span class="pre">lineinfile</span></code>, <code class="docutils literal notranslate"><span class="pre">blockinfile</span></code> and
<code class="docutils literal notranslate"><span class="pre">ini_file</span></code> are used to configure files. Module <code class="docutils literal notranslate"><span class="pre">service</span></code> is used
to manage both Linux and FreeBSD services.</p>
<p>The directory <code class="docutils literal notranslate"><span class="pre">contrib</span></code> comprises examples of how to install and
configure various applications, and how to create the handlers and
templates.</p>
<p>The user of this role is expected to master at least the following
Ansible topics:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.ansible.com/ansible/latest/network/getting_started/basic_concepts.html">Basic Concepts</a></p></li>
<li><p><a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse_roles.html">Roles</a></p></li>
<li><p><a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks.html">Working With Playbooks</a></p></li>
</ul>
<p>Feel free to <a class="reference external" href="https://github.com/vbotka/ansible-config-light/issues">share your feedback and report issues</a>.</p>
</div>
<div class="section" id="installation">
<span id="ug-installation"></span><h2><a class="toc-backref" href="#id22">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>The most convenient way how to install an Ansible role is to use
Ansible Galaxy CLI <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span></code>. The utility comes with the
standard Ansible package and provides the user with a simple interface
to the Ansible Galaxy’s services. For example take a look at the
current status of the role</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shell</span><span class="o">&gt;</span> <span class="n">ansible</span><span class="o">-</span><span class="n">galaxy</span> <span class="n">info</span> <span class="n">vbotka</span><span class="o">.</span><span class="n">config_light</span>
</pre></div>
</div>
<p>and install it</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shell</span><span class="o">&gt;</span> <span class="n">ansible</span><span class="o">-</span><span class="n">galaxy</span> <span class="n">install</span> <span class="n">vbotka</span><span class="o">.</span><span class="n">config_light</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>To install specific versions from various sources see <a class="reference external" href="https://galaxy.ansible.com/docs/using/installing.html">Installing content</a>.</p></li>
<li><p>Take a look at other roles <code class="docutils literal notranslate"><span class="pre">shell&gt;</span> <span class="pre">ansible-galaxy</span> <span class="pre">search</span> <span class="pre">--author=vbotka</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="playbook">
<span id="ug-playbook"></span><h2><a class="toc-backref" href="#id23">Playbook</a><a class="headerlink" href="#playbook" title="Permalink to this headline">¶</a></h2>
<p>Below is simple playbook that applies this role at single host
srv.example.com (2)</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="l l-Scalar l-Scalar-Plain">shell&gt; cat config-light.yml</span>
</span><span class="l l-Scalar l-Scalar-Plain">- hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">srv.example.com</span>
  <span class="l l-Scalar l-Scalar-Plain">gather_facts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="l l-Scalar l-Scalar-Plain">connection</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ssh</span>
  <span class="l l-Scalar l-Scalar-Plain">remote_user</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
  <span class="l l-Scalar l-Scalar-Plain">become</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
  <span class="l l-Scalar l-Scalar-Plain">become_user</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
  <span class="l l-Scalar l-Scalar-Plain">become_method</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">sudo</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">vbotka.config_light</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">gather_facts:</span> <span class="pre">true</span></code> (3) must be set to gather facts
needed to evaluate OS specific options of the role. For
example to install packages the variable <em>ansible_os_family</em>
is needed to select the appropriate Ansible module.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>For details see <a class="reference external" href="https://docs.ansible.com/ansible/latest/plugins/connection.html">Connection Plugins</a> (4-5)</p></li>
<li><p>and <a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/become.html#understanding-privilege-escalation">Understanding Privilege Escalation</a> (6-8).</p></li>
</ul>
</div>
</div>
<div class="section" id="debug">
<span id="ug-debug"></span><h2><a class="toc-backref" href="#id24">Debug</a><a class="headerlink" href="#debug" title="Permalink to this headline">¶</a></h2>
<p>To see additional debug information enable debug output in the
configuration</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cl_debug</span><span class="p">:</span> <span class="n">true</span>
</pre></div>
</div>
<p>, or set the extra variable in the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shell</span><span class="o">&gt;</span> <span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="n">config</span><span class="o">-</span><span class="n">light</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;cl_debug=true&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The debug output of this role is optimized for the <code class="docutils literal notranslate"><span class="pre">yaml</span></code>
callback plugin. Set this plugin for example in the
environment <code class="docutils literal notranslate"><span class="pre">shell&gt;</span> <span class="pre">export</span> <span class="pre">ANSIBLE_STDOUT_CALLBACK=yaml</span></code>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_debugger.html">Playbook Debugger</a></p></li>
</ul>
</div>
</div>
<div class="section" id="tags">
<span id="ug-tags"></span><h2><a class="toc-backref" href="#id25">Tags</a><a class="headerlink" href="#tags" title="Permalink to this headline">¶</a></h2>
<p>The tags provide very useful tool to run selected tasks of the
role. To see what tags are available list the tags of the role with
the command:</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"> <span class="l l-Scalar l-Scalar-Plain">shell&gt; ansible-playbook config-light.yml --list-tags</span>
</span>
 <span class="l l-Scalar l-Scalar-Plain">playbook</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">config-light.yml</span>

   <span class="l l-Scalar l-Scalar-Plain">play</span> <span class="c1">#1 (srv.example.com): srv.example.com        TAGS: []</span>
   <span class="nt">TASK TAGS</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">always</span><span class="p p-Indicator">,</span> <span class="nv">cl_debug</span><span class="p p-Indicator">,</span> <span class="nv">cl_files</span><span class="p p-Indicator">,</span> <span class="nv">cl_packages</span><span class="p p-Indicator">,</span> <span class="nv">cl_sanity</span><span class="p p-Indicator">,</span> <span class="nv">cl_services</span><span class="p p-Indicator">,</span> <span class="nv">cl_setup</span><span class="p p-Indicator">,</span> <span class="nv">cl_vars</span><span class="p p-Indicator">]</span>
</pre></div>
</td></tr></table></div>
<p>For example see the list of the variables and their values with the
tag <code class="docutils literal notranslate"><span class="pre">cl-debug</span></code> (enable the debug output)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shell</span><span class="o">&gt;</span> <span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="n">config</span><span class="o">-</span><span class="n">light</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">t</span> <span class="n">cl_debug</span>
</pre></div>
</div>
<p>See what packages will be installed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shell</span><span class="o">&gt;</span> <span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="n">config</span><span class="o">-</span><span class="n">light</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">t</span> <span class="n">cl_packages</span> <span class="o">--</span><span class="n">check</span>
</pre></div>
</div>
<p>Install packages and exit the play</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shell</span><span class="o">&gt;</span> <span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="n">config</span><span class="o">-</span><span class="n">light</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">t</span> <span class="n">cl_packages</span>
</pre></div>
</div>
</div>
<div class="section" id="variables">
<span id="ug-variables"></span><h2><a class="toc-backref" href="#id26">Variables</a><a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h2>
<p>In this chapter we describe role’s default variables stored in the
directory <code class="docutils literal notranslate"><span class="pre">defaults</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html#variable-precedence-where-should-i-put-a-variable">Ansible variable precedence: Where should I put a variable?</a></p></li>
</ul>
</div>
<div class="section" id="default-variables">
<span id="ug-defaults"></span><h3><a class="toc-backref" href="#id27">Default variables</a><a class="headerlink" href="#default-variables" title="Permalink to this headline">¶</a></h3>
<p>Most of the variables are self-explaining. The structure of the
dictionaries with the configuration data for handlers, packages,
services, and files will be explained in details.</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/defaults/main.yml">defaults/main.yml</a>]</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="hll"><span class="c1"># defaults for config_light</span>
</span>
<span class="nt">cl_sanity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>              <span class="c1"># Import tasks/sanity.yml</span>
<span class="nt">cl_setup</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>               <span class="c1"># Import tasks/setup.yml</span>
<span class="nt">cl_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>              <span class="c1"># Print debug output</span>
<span class="nt">cl_backup</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>             <span class="c1"># Backup files</span>

<span class="c1"># Combine assembled data with these variables</span>
<span class="nt">cl_handlers</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">cl_packages</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">cl_services</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">cl_files</span><span class="p">:</span> <span class="p p-Indicator">{}</span>

<span class="c1"># Assemble data from these directories</span>
<span class="nt">cl_dird</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">role_path</span><span class="nv"> </span><span class="s">}}/files&quot;</span>
<span class="nt">cl_handlersd_dir</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">cl_dird</span><span class="nv"> </span><span class="s">}}/handlers.d&quot;</span>
<span class="nt">cl_packagesd_dir</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">cl_dird</span><span class="nv"> </span><span class="s">}}/packages.d&quot;</span>
<span class="nt">cl_servicesd_dir</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">cl_dird</span><span class="nv"> </span><span class="s">}}/services.d&quot;</span>
<span class="nt">cl_filesd_dir</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">cl_dird</span><span class="nv"> </span><span class="s">}}/files.d&quot;</span>

<span class="c1"># Assemble inventory_hostname data into these files</span>
<span class="c1"># cl_dira_owner: root        # no default</span>
<span class="c1"># cl_dira_group: adm         # no default</span>
<span class="nt">cl_dira_dmode</span><span class="p">:</span> <span class="s">&quot;0775&quot;</span>         <span class="c1"># default very permissive, restrict if necessary</span>
<span class="nt">cl_dira_fmode</span><span class="p">:</span> <span class="s">&quot;0664&quot;</span>         <span class="c1"># default very permissive, restrict if necessary</span>
<span class="nt">cl_dira</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">cl_dird</span><span class="nv"> </span><span class="s">}}/assemble&quot;</span>
<span class="nt">cl_assemble_regexp</span><span class="p">:</span> <span class="s">&#39;^(.*)[^~]$&#39;</span>   <span class="c1"># Any string but terminated with ~</span>
<span class="c1"># cl_assemble_validate: &#39;ansible-lint -x 205 %s&#39;  # no default</span>
<span class="nt">cl_handlersd</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">cl_dira</span><span class="nv"> </span><span class="s">}}/handlersd&quot;</span>
<span class="nt">cl_packagesd</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">cl_dira</span><span class="nv"> </span><span class="s">}}/packagesd.{{</span><span class="nv"> </span><span class="s">inventory_hostname</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="nt">cl_servicesd</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">cl_dira</span><span class="nv"> </span><span class="s">}}/servicesd.{{</span><span class="nv"> </span><span class="s">inventory_hostname</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="nt">cl_filesd</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">cl_dira</span><span class="nv"> </span><span class="s">}}/filesd.{{</span><span class="nv"> </span><span class="s">inventory_hostname</span><span class="nv"> </span><span class="s">}}&quot;</span>

<span class="c1"># Handlers</span>
<span class="nt">cl_handlers_validate</span><span class="p">:</span> <span class="s">&#39;ansible-lint</span><span class="nv"> </span><span class="s">%s&#39;</span>

<span class="c1"># OS common</span>
<span class="nt">install_retries</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="nt">install_delay</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>

<span class="c1"># FreeBSD</span>
<span class="nt">freebsd_install_method</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">packages</span>
<span class="c1"># freebsd_install_method: ports</span>
<span class="nt">freebsd_use_packages</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="c1"># EOF</span>
<span class="nn">...</span>
</pre></div>
</td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Defaults for the variables <em>cl_dira_dmode</em> (25) and
<em>cl_dira_fmode</em> (26) are very permissive. Restrict the
permissions if necessary.</p>
</div>
<p>&lt;TODO: complete description of all default variables&gt;</p>
</div>
<div class="section" id="cl-handlers-dictionary-with-handlers">
<span id="ug-handlers"></span><h3><a class="toc-backref" href="#id28">cl_handlers - dictionary with handlers</a><a class="headerlink" href="#cl-handlers-dictionary-with-handlers" title="Permalink to this headline">¶</a></h3>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#synopsis" id="id33">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id34">Parameters</a></p></li>
<li><p><a class="reference internal" href="#example" id="id35">Example</a></p></li>
<li><p><a class="reference internal" href="#see-also" id="id36">See Also</a></p></li>
<li><p><a class="reference internal" href="#notes" id="id37">Notes</a></p></li>
</ul>
</div>
<div class="section" id="synopsis">
<h4><a class="toc-backref" href="#id33">Synopsis</a><a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h4>
<p>The variable <em>cl_handlers</em> is a dictionary of the handlers. Structure
of the dictionary depends on the template that is used to create the
file with the handlers. For example, the structure below can be used
with the template <em>handlers-auto1.yml.j2</em>.</p>
</div>
<div class="section" id="parameters">
<h4><a class="toc-backref" href="#id34">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 26%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line"><em>Parameter</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Type</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Comments</em></div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>template</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Template filename</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>handler</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Name of the handler</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>module</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Ansible module in handler</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>params</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>list</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Ansible module parameters</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>conditions</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>list</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">List of conditions</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h4><a class="toc-backref" href="#id35">Example</a><a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>FreeBSD handlers for postfix</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/contrib/postfix/conf-light/handlers.d/postfix-freebsd">contrib/postfix/conf-light/handlers.d/postfix-freebsd</a>]</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nt">postfix_freebsd</span><span class="p">:</span>
<span class="hll">  <span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">handlers-auto1.yml.j2</span>
</span>  <span class="nt">params</span><span class="p">:</span>

<span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">handler</span><span class="p">:</span> <span class="s">&#39;enable</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">start</span><span class="nv"> </span><span class="s">postfix&#39;</span>
</span>      <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">service</span>
      <span class="nt">params</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;name:</span><span class="nv"> </span><span class="s">postfix&#39;</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;state:</span><span class="nv"> </span><span class="s">started&#39;</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;enabled:</span><span class="nv"> </span><span class="s">true&#39;</span>

<span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">handler</span><span class="p">:</span> <span class="s">&#39;disable</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">stop</span><span class="nv"> </span><span class="s">postfix&#39;</span>
</span>      <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">service</span>
      <span class="nt">params</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;name:</span><span class="nv"> </span><span class="s">postfix&#39;</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;state:</span><span class="nv"> </span><span class="s">stopped&#39;</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;enabled:</span><span class="nv"> </span><span class="s">false&#39;</span>

<span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">handler</span><span class="p">:</span> <span class="s">&#39;reload</span><span class="nv"> </span><span class="s">postfix&#39;</span>
</span>      <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">service</span>
      <span class="nt">params</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;name:</span><span class="nv"> </span><span class="s">postfix&#39;</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;state:</span><span class="nv"> </span><span class="s">reloaded&#39;</span>
      <span class="nt">conditions</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;-</span><span class="nv"> </span><span class="s">cl_service_postfix_enable|bool&#39;</span>

<span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">handler</span><span class="p">:</span> <span class="s">&#39;restart</span><span class="nv"> </span><span class="s">postfix&#39;</span>
</span>      <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">service</span>
      <span class="nt">params</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;name:</span><span class="nv"> </span><span class="s">postfix&#39;</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;state:</span><span class="nv"> </span><span class="s">restarted&#39;</span>
      <span class="nt">conditions</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;-</span><span class="nv"> </span><span class="s">cl_service_postfix_enable|bool&#39;</span>

<span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">handler</span><span class="p">:</span> <span class="s">&#39;postfix</span><span class="nv"> </span><span class="s">check&#39;</span>
</span>      <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">command</span>
      <span class="nt">params</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;cmd:</span><span class="nv"> </span><span class="s">/usr/local/sbin/postfix</span><span class="nv"> </span><span class="s">check&#39;</span>

<span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">handler</span><span class="p">:</span> <span class="s">&#39;newaliases&#39;</span>
</span>      <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">command</span>
      <span class="nt">params</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;cmd:</span><span class="nv"> </span><span class="s">/usr/bin/newaliases&#39;</span>

<span class="c1">#    - handler: &#39;postmap smtp sasl passwords&#39;</span>
<span class="c1">#      module: command</span>
<span class="c1">#      params:</span>
<span class="c1">#        - &#39;cmd: /usr/local/sbin/postmap {{ postfix_main_cf_smtp_sasl_password_maps }}&#39;</span>

<span class="c1">#    - handler: &#39;postmap virtual aliases&#39;</span>
<span class="c1">#      mofule: command</span>
<span class="c1">#      params:</span>
<span class="c1">#        - cmd: /usr/local/sbin/postmap {{ postfix_virtual }}&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="see-also">
<h4><a class="toc-backref" href="#id36">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h4>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/vars-handlers.yml">vars-handlers.yml</a> how the variable <em>cl_handlers</em> is combined with the content of the directory <em>cl_handlersd_dir</em>.</p></li>
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/setup.yml">setup.yml</a> how the handlers are created.</p></li>
<li><p>For details see the template <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/templates/handlers-auto1.yml.j2">handlers-auto1.yml.j2</a>.</p></li>
</ul>
</div>
</div>
<div class="section" id="notes">
<h4><a class="toc-backref" href="#id37">Notes</a><a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The template <em>handlers-auto1.yml.j2</em> is ready to be used in
the directory <code class="docutils literal notranslate"><span class="pre">templates</span></code>. The user is expected to create
new templates when needed. Feel free to change the structure
of the data and to create new templates that might fit the
purpose better. Feel free to contribute new templates
configuration examples to the <a class="reference external" href="https://github.com/vbotka/ansible-config-light/">project</a>.</p>
</div>
</div>
</div>
<div class="section" id="cl-packages-dictionary-with-packages-or-bsd-ports">
<span id="ug-packages"></span><h3><a class="toc-backref" href="#id29">cl_packages - dictionary with packages or BSD ports</a><a class="headerlink" href="#cl-packages-dictionary-with-packages-or-bsd-ports" title="Permalink to this headline">¶</a></h3>
<div class="contents local topic" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#id2" id="id38">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id39">Parameters</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id40">Example</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id41">See Also</a></p></li>
</ul>
</div>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id38">Synopsis</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>The variable <em>cl_packages</em> is a dictionary of the packages, or BSD
ports to be installed.</p>
</div>
<div class="section" id="id3">
<h4><a class="toc-backref" href="#id39">Parameters</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 26%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line"><em>Parameter</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Type</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Comments</em></div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>name</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Package or BSD port</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id4">
<h4><a class="toc-backref" href="#id40">Example</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>FreeBSD package for postfix</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/contrib/postfix/conf-light/packages.d/postfixd">contrib/postfix/conf-light/packages.d/postfix</a>]</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nt">postfix</span><span class="p">:</span>
<span class="hll">  <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;mail/postfix&#39;</span>
</span></pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id5">
<h4><a class="toc-backref" href="#id41">See Also</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/vars-packages.yml">vars-packages.yml</a> how the variable <em>cl_packages</em> is combined with the content of the directory <em>cl_packagesd_dir</em>.</p></li>
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/packages.yml">packages.yml</a> how the packages or BSD ports are installed.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="cl-services-dictionary-with-services">
<span id="ug-services"></span><h3><a class="toc-backref" href="#id30">cl_services - dictionary with services</a><a class="headerlink" href="#cl-services-dictionary-with-services" title="Permalink to this headline">¶</a></h3>
<div class="contents local topic" id="id6">
<ul class="simple">
<li><p><a class="reference internal" href="#id7" id="id42">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id43">Parameters</a></p></li>
<li><p><a class="reference internal" href="#id9" id="id44">Example</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id45">See Also</a></p></li>
</ul>
</div>
<div class="section" id="id7">
<h4><a class="toc-backref" href="#id42">Synopsis</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>The variable <em>cl_services</em> is a dictionary with the services managed
by this role.</p>
</div>
<div class="section" id="id8">
<h4><a class="toc-backref" href="#id43">Parameters</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 26%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line"><em>Parameter</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Type</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Comments</em></div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>name</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Service</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>state</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">State of the service</div>
<div class="line">default: started</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>enabled</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>boolean</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Start of boot</div>
<div class="line">default: true</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id9">
<h4><a class="toc-backref" href="#id44">Example</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>FreeBSD services for postfix</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/contrib/postfix/conf-light/services.d/postfixd">contrib/postfix/conf-light/service.d/postfix</a>]</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nt">postfix</span><span class="p">:</span>
<span class="hll">  <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;postfix&#39;</span>
</span>  <span class="nt">state</span><span class="p">:</span> <span class="s">&#39;{{</span><span class="nv"> </span><span class="s">cl_service_postfix_state</span><span class="nv"> </span><span class="s">}}&#39;</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="s">&#39;{{</span><span class="nv"> </span><span class="s">cl_service_postfix_enable</span><span class="nv"> </span><span class="s">}}&#39;</span>
</pre></div>
</td></tr></table></div>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/contrib/postfix/conf-light/services.d/sendmail">contrib/postfix/conf-light/service.d/sendmail</a>]</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nt">sendmail</span><span class="p">:</span>
<span class="hll">  <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;sendmail&#39;</span>
</span>  <span class="nt">state</span><span class="p">:</span> <span class="s">&#39;{{</span><span class="nv"> </span><span class="s">cl_service_sendmail_state</span><span class="nv"> </span><span class="s">}}&#39;</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="s">&#39;{{</span><span class="nv"> </span><span class="s">cl_service_sendmail_enable</span><span class="nv"> </span><span class="s">}}&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id10">
<h4><a class="toc-backref" href="#id45">See Also</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/vars-services.yml">vars-services.yml</a> how the variable <em>cl_services</em> is combined with the content of the directory <em>cl_servicesd_dir</em>.</p></li>
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/services.yml">services.yml</a> how the services are configured.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="cl-files-dictionary-with-files">
<span id="ug-files"></span><h3><a class="toc-backref" href="#id31">cl_files - dictionary with files</a><a class="headerlink" href="#cl-files-dictionary-with-files" title="Permalink to this headline">¶</a></h3>
<div class="contents local topic" id="id11">
<ul class="simple">
<li><p><a class="reference internal" href="#id12" id="id46">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#id13" id="id47">See Also</a></p></li>
<li><p><a class="reference internal" href="#parameters-for-template" id="id48">Parameters for template</a></p></li>
<li><p><a class="reference internal" href="#example-of-template" id="id49">Example of template</a></p></li>
<li><p><a class="reference internal" href="#id14" id="id50">See Also</a></p></li>
<li><p><a class="reference internal" href="#id15" id="id51">Notes</a></p></li>
<li><p><a class="reference internal" href="#parameters-for-lineinfile" id="id52">Parameters for lineinfile</a></p></li>
<li><p><a class="reference internal" href="#example-of-lineinfile" id="id53">Example of lineinfile</a></p></li>
<li><p><a class="reference internal" href="#id17" id="id54">See Also</a></p></li>
<li><p><a class="reference internal" href="#parameters-for-blockinfile" id="id55">Parameters for blockinfile</a></p></li>
<li><p><a class="reference internal" href="#example-of-blockinfileinfile" id="id56">Example of blockinfileinfile</a></p></li>
<li><p><a class="reference internal" href="#id18" id="id57">See Also</a></p></li>
<li><p><a class="reference internal" href="#parameters-for-ini-file" id="id58">Parameters for ini_file</a></p></li>
<li><p><a class="reference internal" href="#example-of-ini-file" id="id59">Example of ini_file</a></p></li>
<li><p><a class="reference internal" href="#id19" id="id60">See Also</a></p></li>
</ul>
</div>
<div class="section" id="id12">
<h4><a class="toc-backref" href="#id46">Synopsis</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>The variable <em>cl_files</em> is a dictionary with the files created and
modified by this role. It’s optional which Ansible module will be
used. Several options are available:</p>
<ul class="simple">
<li><p>template: If the attribute <em>template</em> is defined in the dictionary</p></li>
<li><p>lineinfile: If the attribute <em>lines</em> is defined in the dictionary</p></li>
<li><p>blockinfile: If the attribute <em>blocks</em> is defined in the dictionary</p></li>
<li><p>ini_file: If the attribute <em>ini</em> is defined in the dictionary</p></li>
</ul>
</div>
<div class="section" id="id13">
<h4><a class="toc-backref" href="#id47">See Also</a><a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/files.yml">vars-files.yml</a> how the variable <em>cl_files</em> is combined with the content of the directory <em>cl_filesd_dir</em>.</p></li>
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/files.yml">files.yml</a> how the files are created and modified.</p></li>
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/files-create-backup.yml">files-create-backup.yml</a> how the backups are created (when enabled by <em>cl_backup</em>).</p></li>
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/files-delete-backup.yml">files-delete-backup.yml</a> how the backup files are deleted if the files haven’t been modified.</p></li>
</ul>
</div>
</div>
<div class="section" id="parameters-for-template">
<h4><a class="toc-backref" href="#id48">Parameters for template</a><a class="headerlink" href="#parameters-for-template" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 26%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line"><em>Parameter</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Type</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Comments</em></div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>path</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Path to file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>template</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Template filename</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>owner</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Owner of the file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>group</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Group of the file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>mode</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Mode of the file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>force</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>boolean</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Replace when different</div>
<div class="line">default: true</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>validate</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Command to validate file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>handlers</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>list</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">List of handlers</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-of-template">
<h4><a class="toc-backref" href="#id49">Example of template</a><a class="headerlink" href="#example-of-template" title="Permalink to this headline">¶</a></h4>
<p>File <code class="docutils literal notranslate"><span class="pre">/etc/mail/mailer.conf</span></code> for postfix</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/contrib/postfix/conf-light/files.d/mailer-conf">contrib/postfix/conf-light/files.d/mailer-conf</a>]</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nt">mailerconf</span><span class="p">:</span>
  <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/etc/mail/mailer.conf&#39;</span>
  <span class="nt">force</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">owner</span><span class="p">:</span> <span class="s">&#39;root&#39;</span>
  <span class="nt">group</span><span class="p">:</span> <span class="s">&#39;wheel&#39;</span>
  <span class="nt">mode</span><span class="p">:</span> <span class="s">&#39;0644&#39;</span>
<span class="hll">  <span class="nt">template</span><span class="p">:</span> <span class="s">&#39;mailer.conf.j2&#39;</span>
</span></pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id14">
<h4><a class="toc-backref" href="#id50">See Also</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/files-template.yml">files-template.yml</a> how the files are modified or created by the Ansible module <code class="docutils literal notranslate"><span class="pre">template</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="id15">
<h4><a class="toc-backref" href="#id51">Notes</a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are couple of templates ready to be used in the directory <code class="docutils literal notranslate"><span class="pre">templates</span></code>. The user is expected to create new templates when needed. Feel free to contribute new templates to the <a class="reference external" href="https://github.com/vbotka/ansible-config-light/">project</a>.</p>
</div>
</div>
<div class="section" id="parameters-for-lineinfile">
<h4><a class="toc-backref" href="#id52">Parameters for lineinfile</a><a class="headerlink" href="#parameters-for-lineinfile" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 26%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line"><em>Parameter</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Type</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Comments</em></div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>path</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Path to file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>lines</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>list</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">List of regexp and lines</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>owner</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Owner of the file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>group</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Group of the file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>mode</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Mode of the file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>create</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>boolean</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Create if does not exist</div>
<div class="line">default: false</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>validate</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Command to validate file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>handlers</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>list</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">List of handlers</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-of-lineinfile">
<h4><a class="toc-backref" href="#id53">Example of lineinfile</a><a class="headerlink" href="#example-of-lineinfile" title="Permalink to this headline">¶</a></h4>
<p>File <code class="docutils literal notranslate"><span class="pre">/usr/local/etc/postfix/main.cf</span></code> for postfix</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/contrib/postfix/conf-light/files.d/postfix-main.cf">contrib/postfix/conf-light/files.d/postfix-main.cf</a>]</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nt">postfix_main_cf</span><span class="p">:</span>
  <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/usr/local/etc/postfix/main.cf&#39;</span>
  <span class="nt">create</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">owner</span><span class="p">:</span> <span class="s">&#39;root&#39;</span>
  <span class="nt">group</span><span class="p">:</span> <span class="s">&#39;wheel&#39;</span>
  <span class="nt">mode</span><span class="p">:</span> <span class="s">&#39;0644&#39;</span>
  <span class="nt">handlers</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="s">&#39;postfix_freebsd</span><span class="nv"> </span><span class="s">reload</span><span class="nv"> </span><span class="s">postfix&#39;</span>
<span class="hll">  <span class="nt">lines</span><span class="p">:</span>
</span>    <span class="p p-Indicator">-</span> <span class="nt">regexp</span><span class="p">:</span> <span class="s">&#39;^myhostname\s*=\s*(.*)$&#39;</span>
      <span class="nt">line</span><span class="p">:</span> <span class="s">&#39;myhostname</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">cl_myhostname</span><span class="nv"> </span><span class="s">}}&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id17">
<h4><a class="toc-backref" href="#id54">See Also</a><a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/files-lineinfile.yml">files-lineinfile.yml</a> how the files are modified or created by the Ansible module <code class="docutils literal notranslate"><span class="pre">lineinfile</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="parameters-for-blockinfile">
<h4><a class="toc-backref" href="#id55">Parameters for blockinfile</a><a class="headerlink" href="#parameters-for-blockinfile" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 26%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line"><em>Parameter</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Type</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Comments</em></div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>path</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Path to file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>blocks</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>list</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">List of blocks and markers</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>owner</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Owner of the file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>group</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Group of the file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>mode</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Mode of the file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>create</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>boolean</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Create if does not exist</div>
<div class="line">default: false</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>validate</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Command to validate file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>handlers</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>list</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">List of handlers</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-of-blockinfileinfile">
<h4><a class="toc-backref" href="#id56">Example of blockinfileinfile</a><a class="headerlink" href="#example-of-blockinfileinfile" title="Permalink to this headline">¶</a></h4>
<p>&lt;TODO: No example yet&gt;</p>
</div>
<div class="section" id="id18">
<h4><a class="toc-backref" href="#id57">See Also</a><a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/files-blockinfile.yml">files-blockinfile.yml</a> how the files are modified or created by the Ansible module <code class="docutils literal notranslate"><span class="pre">blockinfile</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="parameters-for-ini-file">
<h4><a class="toc-backref" href="#id58">Parameters for ini_file</a><a class="headerlink" href="#parameters-for-ini-file" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 26%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line"><em>Parameter</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Type</em></div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line"><em>Comments</em></div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>path</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Path to file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>ini</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>list</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">required</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">List of {section,option,</div>
<div class="line">value} dictionaries</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>owner</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Owner of the file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>group</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Group of the file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>mode</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>string</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Mode of the file</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>create</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>boolean</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Create if does not exist</div>
<div class="line">default: true</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>handlers</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><em>list</em></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">List of handlers</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-of-ini-file">
<h4><a class="toc-backref" href="#id59">Example of ini_file</a><a class="headerlink" href="#example-of-ini-file" title="Permalink to this headline">¶</a></h4>
<p>&lt;TODO: No example yet&gt;</p>
</div>
<div class="section" id="id19">
<h4><a class="toc-backref" href="#id60">See Also</a><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>See <a class="reference external" href="https://github.com/vbotka/ansible-config-light/blob/master/tasks/files-inifile.yml">files-inifile.yml</a> how the files are modified or created by the Ansible module <code class="docutils literal notranslate"><span class="pre">ini_file</span></code>.</p></li>
</ul>
</div>
</div>
</div>
</div>
<div class="section" id="best-practice">
<span id="ug-bp"></span><h2><a class="toc-backref" href="#id32">Best practice</a><a class="headerlink" href="#best-practice" title="Permalink to this headline">¶</a></h2>
<p>Create variables. Take a look at directory <code class="docutils literal notranslate"><span class="pre">conf-light/assemble/</span></code>
what files were created.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">shell&gt; ansible-playbook config-light.yml -t cl_vars</span>
</pre></div>
</div>
<p>Test sanity.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">shell&gt; ansible-playbook config-light.yml -t cl_sanity</span>
</pre></div>
</div>
<p>Create handlers. Take a look at directory
<code class="docutils literal notranslate"><span class="pre">roles/vbotka.config_light/handlers</span></code> what handlers were created. Run
this task once to create the handlers. Then disable this task
<code class="docutils literal notranslate"><span class="pre">cl_setup:</span> <span class="pre">false</span></code> to speedup the playbook.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">shell&gt; ansible-playbook config-light.yml -t cl_setup</span>
</pre></div>
</div>
<p>Display variables. Display the variables for debug if needed. Then
disable this task <code class="docutils literal notranslate"><span class="pre">cl_debug:</span> <span class="pre">false</span></code> to speedup the playbook.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">shell&gt; ansible-playbook config-light.yml -t cl_debug</span>
</pre></div>
</div>
<p>Install packages.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">shell&gt; ansible-playbook config-light.yml -t cl_packages</span>
</pre></div>
</div>
<p>Create and modify files</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">shell&gt; ansible-playbook config-light.yml -t cl_files</span>
</pre></div>
</div>
<p>Configure services</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">shell&gt; ansible-playbook config-light.yml -t cl_services</span>
</pre></div>
</div>
<p>The role and tested data are idempotent. When running the playbook
repeatedly there should be no changes once the application is
installed.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="annotation.html" class="btn btn-neutral float-right" title="Annotated source code" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Ansible role Config Light" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="copyright.html">Copyright</a> 2020, Vladimir Botka.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.3.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>